sudo: false
language: php
matrix:
  fast_finish: true
  include:
  - php: '5.6'
  - php: '7.0'
  - php: '7.1'
    env: SNIFF=1
  - php: '7.2'
  - php: nightly
  allow_failures:
  - php: '5.6'
  - php: nightly
before_install:
- echo "{\"http-basic\":{\"repo.magento.com\":{\"username\":\"${MAGENTO_USERNAME}\",\"password\":\"${MAGENTO_PASSWORD}\"}}}" > auth.json
- if [[ "$SNIFF" == "1" ]]; then composer self-update; fi
- if [[ "$SNIFF" == "1" ]]; then composer require squizlabs/php_codesniffer; fi
- if [[ "$SNIFF" == "1" ]]; then composer require magento/magento-coding-standard; fi
- if [[ "$SNIFF" == "1" ]]; then composer require dealerdirect/phpcodesniffer-composer-installer; fi
- if [[ "$SNIFF" == "1" ]]; then composer install; fi
- phpenv rehash
script:
- find -L . -path ./vendor -prune -o -name '*.php' -print0 | xargs -0 -n 1 -P 4 php -l
- if [[ "$SNIFF" == "1" ]]; then php vendor/bin/phpcs --standard=Magento2 --ignore=*/etc/*,*/vendor/* ./; fi
env:
  global:
  - secure: m7bMgtnltdbI+BwWkeoKCxmd8KmHtxWSf1+gCVakcFDnwQUpyKiSmyxNE11xe4UI04WhpyYZbhi7GtPtNkb8sojlWmORKRPo6pnmcMgyZILqTY3KjTyfXyfpdug3YPq/AnSuF8cv6yI2Q/pTFkr15yGW2UFmUQRvA09iX1IPBVMcosdum0eG9w4Qx3dDoshwxv1DEMEIcR9maqw/3cEoMtCgxK/QZCIV5wx7fp0jBcLM11VV80gujmJFTPWzteZfbxvTaTBnPqxhA62zJ4h1JMdpLNt41TaJigXDXfj8k1qs5DvhXoN2gncZHVlgkr0yfwqOO+Vg1PqazbnxcNhXJh0zB76B59usxERKVaV0pqAs9tf7Cv/PKiYGWwJDtphqi4mQTWq8UMSBmxWIhl3cpWbM/hzbXGAKREAdF2EVQZZKVjw4ktgDxDDfwlVJrHtpPFFM9w0AWWk+d4B1PVr+1AOxky0ZzsY1So7z4nrhaYW/YN2pIPDYEP6XGL3SB0mvGRh+HbQ7qlH/UMjX5sSDomOUrRGqOaTsu+fuNyLqVQl05gI0JzrT+HhknyHX/1bO4WsRb9NblJMNxXClNuEFN5FdFgQSZ0l2z7ollKBeGPns3lq4Pe6YkKuw1S0B24vHT2zJyGGoCHLlh/8kmGd9o9iNfdYpDaAnGhO6KrrMMRk=
  - secure: gTz0X1SiLL0M3/5lpcpdJDikbCkBbUsAwyyUJfqmhbD/4UTuj4lkFPIfwqG3T8nAqI1EcgYN9hiqwQNEMfiKyYbkQdSvTS1jVOos4xXaW82573s5HCV/t7OeeSpRJkg1aCU+NM4BPvSc/elFaCA87wiWqHhXg58TCWeTRPFq/uw3KepPw16xsyQNZeaWMxLm2p86R9hNUchGxloleJGpcbkvvaFUFhbm+rc4dxhYkNYit4IrGc8vvcUeEE7e3mgp5mgaEEKht52mTARZi1TS9i7bnsHVh8axreHkO392KjTCjrvPPKFKApyRZVSY/3MpFE4SbiaVLrYMVMX6wYobuPyILmkYPIpI5YZrbaePax+GUqRHtMhGL6RbtG7JaajhLkyHgJ/ef8ifndaKkY7Lsc9QoYFY2VCb8PX51TmtCIZ2UCttSvSPN+9XgEVZjeee+BwT+aDQCY0bb3UFWZN5q7F7cgAKMY3wAdOdIzRYbGqtOuNmrZc2az3mqd7D/7hsv1l8+Cae+tsidWM2siaLjwJFkPL9I0afb16BXXH0Cc8vx+WVSzO8mrhNEMBMaqo1bMsN0Vt4r+E5rxiuBHGjddcZRfk+fLGpzC4r88Z3PM3GT2H2YyVTlyAOvFZJD9+xbPjFtAOtkodDDoSGpLN90cbQjhFtjiO1Egxl/LN7FGs=
